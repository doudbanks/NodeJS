const { EventEmitter } = require('events');

class Door {

  constructor() {
    this.color = 'red';
    this.secureArea = true;
    this._emitter = new EventEmitter();
  }

  open(user) {
    this._emitter.emit('DOOR_OPEN', { employeeId: user.id, ts: new Date().getTime() });
  }

  listenOpening(fn) {
    this._emitter.on('DOOR_OPEN', fn);
  }

  close(user) {
    this._emitter.emit('DOOR_CLOSE', { employeeId: user.id, ts: new Date().getTime() });
  }
}

module.exports = {
  Door
}
